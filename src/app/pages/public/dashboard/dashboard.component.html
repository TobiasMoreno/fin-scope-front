<div class="container mx-auto p-6 min-h-screen">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex flex-col space-y-2">
      <h1 class="text-4xl font-bold text-gray-100">Dashboard</h1>
      <h2 class="text-xl font-semibold text-gray-300">Reporte de Inversiones</h2>
      <p class="text-gray-400 max-w-3xl leading-relaxed">
        Bienvenido a tu panel de control financiero. Aquí puedes visualizar el rendimiento de tu portafolio de inversiones, 
        monitorear las variaciones diarias y analizar el crecimiento de tus activos en tiempo real.
      </p>
    </div>
  </div>

  <!-- Error Message -->
  @if (error) {
    <app-error-message 
      [message]="error"
      title="Error de Conexión"
      [showRetry]="true"
      (onRetry)="refreshData()"
    ></app-error-message>
  }

  <!-- Dashboard Content -->
  @if (!loading && !error) {
    <div class="space-y-6 flex flex-col gap-6 justify-center items-center w-full">
      <!-- Main Summary Cards -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6 w-full">
        <app-card [config]="totalInvestedCard"></app-card>
        <app-card [config]="variationCard"></app-card>
        <app-card [config]="gainCard"></app-card>
      </div>

      <!-- Investment Distribution -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 w-full">
        <app-card [config]="cedearsCard"></app-card>
        <app-card [config]="accionesCard"></app-card>
      </div>

      <!-- Investment Table -->
      <app-table
        [dataSource]="investments"
        [config]="tableConfig"
        [loading]="loading"
        (rowClick)="onRowClick($event)"
        (customActionClick)="onCustomActionClick($event)"
        (addClick)="onAddClick()"
        (sortChange)="onSortChange($event)"
      ></app-table>
    </div>
  } @else if (loading) {
    <!-- Loading State -->
    <div class="space-y-6 flex flex-col gap-6 justify-center items-center w-full">
      <!-- Main Summary Cards Skeleton -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6 w-full">
        @for (item of [1,2,3]; track item) {
          <div class="bg-white rounded-lg shadow-lg p-6">
            <app-skeleton [config]="{ type: 'title', className: 'mb-2' }"></app-skeleton>
            <app-skeleton [config]="{ type: 'value', className: 'mb-2' }"></app-skeleton>
            <app-skeleton [config]="{ type: 'subtitle' }"></app-skeleton>
          </div>
        }
      </div>

      <!-- Investment Distribution Skeleton -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 w-full">
        @for (item of [1,2]; track item) {
          <div class="bg-white rounded-lg shadow-lg p-6">
            <app-skeleton [config]="{ type: 'title', className: 'mb-2' }"></app-skeleton>
            <app-skeleton [config]="{ type: 'value', className: 'mb-2' }"></app-skeleton>
            <app-skeleton [config]="{ type: 'subtitle' }"></app-skeleton>
          </div>
        }
      </div>

      <!-- Table Skeleton -->
      <div class="bg-white rounded-lg shadow-lg p-4 w-full">
        <app-skeleton [config]="{ type: 'title', className: 'mb-4' }"></app-skeleton>
        <div class="space-y-3">
          @for (item of [1,2,3,4,5]; track item) {
            <div class="flex items-center space-x-4">
              @for (col of [1,2,3,4,5,6,7,8,9]; track col) {
                <app-skeleton [config]="{ type: 'text', width: '120px' }"></app-skeleton>
              }
            </div>
          }
        </div>
      </div>
    </div>
  } @else {
    <!-- Empty State -->
    <div class="text-center py-12">
      <div class="text-gray-400 mb-4">
        <mat-icon class="text-6xl mb-4">account_balance_wallet</mat-icon>
        <h3 class="text-xl font-semibold mb-2">No hay inversiones registradas</h3>
        <p class="text-gray-500">Comienza agregando tu primera inversión para ver tu dashboard</p>
      </div>
      <button
        (click)="onAddClick()"
        class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-md hover:shadow-lg flex items-center mx-auto"
      >
        <mat-icon class="mr-2">add</mat-icon>
        Agregar Inversión
      </button>
    </div>
  }
</div>
